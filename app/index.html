<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>BlankUp</title>
	<link rel="stylesheet" href="css/style.css" />
	<link rel="stylesheet" href="css/font-awesome/css/font-awesome.css" </head>

	<body>

	</body>

	<script>
		require('BlankUp')

		let currentFile = null

		let previewState = false
		window.addEventListener('keypress', (e) => {

			//Toggle preview with Ctrl + M
			if (e.ctrlKey === true && e.keyCode === 10 && e.shiftKey === true) {
				previewState = !previewState
				editor.previewVisible(previewState)
			}

			//Save the file with Ctrl + S
			if (e.ctrlKey === true && e.keyCode === 19) {
				if(currentFile === null) return
				const markdown = editor.getMarkdown()
				const fs = require('fs')
				fs.writeFile(currentFile.path, markdown, () => {

				})
			}
		})

		//When a file is dropped in use that.
		document.ondragover = document.ondrop = (ev) => {
			ev.preventDefault()
		}
		/*document.body.ondrop = (ev) => {
			const fs = require('fs')
			currentFile = ev.dataTransfer.files[0]
			const name = currentFile.name

			//Made sure it is a markdwon file.
			if(!/.md$/.test(name)) {
				return
			}
			document.querySelector('#title').innerHTML = name
			const filePath = currentFile.path
			fs.readFile(filePath, 'utf8', (err, data) => {
				editor.setMarkdown(data)
			})
			ev.preventDefault()
		}*/

	</script>
	<script src="js/app.js"></script>

</html>
